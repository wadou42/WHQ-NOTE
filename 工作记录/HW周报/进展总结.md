## 方法在三款验收软件上的测试
### 模型介绍
模型：二分类模型，模型在训练时未使用redis数据
模型能力：'accuracy': 0.785, 'precision': 0.8659, 'recall': 0.7588, 'f1_score': 0.809
预测使用opt_config(优化配置）来源：从训练集中提取的opt_config，共1670条
投票方式：以热点函数的**执行时间**作为weights，对置信度进行加权平均以此作为排名依据，选出TOP-10

### 搜索方式
以预测出的TOP-10作为搜索的起点，采用随机搜索的方式进行搜索。注意，搜索过程中是采用实际测试而非预测。

### Redis
测试指标-Redis-benchmark :
set: requests=5000000,clients=80 && get: requests=5000000, clients=80

为保证测试的准确性，每一个opt_config执行50次取平均值作为最终的测试结果。并且在50次测试中，每次测试采用opt_config和O3交替执行的方式以最大程度减小环境对于测试结果准确性的影响，逻辑如下：

```python 
# repeat == 50
for _ in range(repeat):
    opt_time += redis_management.test() #测试opt_config
    base_time += redis_management_base.test() #测试O3
return base_time / opt_time
```

测试结果：
我们的方法最优值相对于-O3基线提升**10.8%**
之前使用SRTuner与RandomTuer测试结果分别是**2.69% 与 2.64%**

![[redis测试.50repeat.png]] 

### Doris
测试指标-TPCH：开缓存热数据
为保证测试的准确性，每一个opt_config进行测试时会执行**26**次查询测试，其中前**6**轮作为预热，**20**次取平均值作为最终的测试结果。由于doris启动较慢、并且需要预热，因此不采用测试redis时的交替执行。
![[Pasted image 20250409111626.png]]