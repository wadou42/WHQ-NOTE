## 工作进展
### 1. 全流程测试
**模型介绍**：
模型：二分类模型，模型在训练时未使用redis数据
模型能力：'accuracy': 0.785, 'precision': 0.8659, 'recall': 0.7588, 'f1_score': 0.809（在opt交叉的情况下）
预测使用opt来源：训练集中的opt，共1670条
投票方式：以热点函数的**执行时间**作为weights，对置信度进行加权平均以此作为排名依据，选出TOP-10

**搜索方式**
随机搜索（但由于时间问题，并未开始搜索，只测试了`TOP-10` `OPT`）

**测试结果**
redis测试时浮动会很大(任务书中的指标是rps，这里使用1000000/rps即平均每个请求消耗时间，单位微秒):
![[redis测试.误差展示.png]]

目前采用减小误差的方式是多次交替执行，逻辑如下
```python
# repeat == 15
for _ in range(repeat):
    opt_time += redis_management.test() #测试opt
    base_time += redis_management_base.test() #测试O3
return base_time / opt_time
```

第一次测试：
![[全流程测试结果.二分类模型.redis.png]]
在`TOP-10`优化配置中，有4个超过target，7个超过baseline(O3).

第二次测试：
![[全流程测试.误差分析.png]]

但是由于测试的次数较多，测试十个opt大概耗时11-12h，不利于后续的搜索工作。
## 目前正在做
1. 寻找关键优化标志，采用在**O0**的基础上开一个优化标志，看性能变化情况。（Q：是在 **O3** 的基础上关优化标志更好还是在 **O0** 的基础上开更好？）
2. 测试doris ,但是担心会影响到redis的测试，所以这部分还处于coding阶段。

## 下一步计划
1. 筛选出关键优化标志
2. 尝试一下多分类，提高精度
3. 现在的OPT来源是训练集，后续会使用random生成，对于非关键优化标志置为1，只对非优化标进行随机